#!/bin/bash

while true; do
    read -p "
Select solving method:
- ipl: Integer Linear Programming
- method: 10 Different Solving Methods
Or type 'exit' to exit the script.
>>> " option

    if [ "$option" = "exit" ]; then
        echo -e "\nExiting the script!"
        break
    else
        if [ "$option" = "ipl" ]; then
            echo -e "\nUsing Integer Linear Programming solving method..."
            while true; do
                read -p "
  (ILP) Select solver:
  - normal: Normal Sudoku
  - ks: Killer Sudoku
  - gt: Greater Than Sudoku
  - hp: Hyper-Sudoku
  - xs: X-Sudoku
  Or type 'exit' to change method. 
  >>> " solver

                if [ "$solver" = "exit" ]; then
                    echo "
  Exiting the current method...
  "
                    break
                else
                    while true; do
                        read -p "
    (ILP/$solver) Enter the name of a .in file (or 'exit' to change solver): 
    >>> " input_name

                        if [ "$input_name" = "exit" ]; then
                            echo "
    Exiting the current solver...
    "
                            break
                        else
                            input_file="$input_name.in"

                            echo -e "\n- Running $input_file"
                            echo -e "Solution:"

                            if [ "$solver" = "normal" ]; then
                                if [ ! -f "tests/$input_file" ]; then
                                    echo "File $input_file not found."
                                else
                                    solution=$(./sudoku-solver < "tests/$input_file")
                                    echo "$solution"
                                fi

                            elif [ "$solver" = "ks" ]; then
                                if [ ! -f "tests-ks/$input_file" ]; then
                                    echo "File $input_file not found."
                                else
                                    solution=$(./killer-sudoku < "tests-ks/$input_file")
                                    echo "$solution"
                                fi

                            elif [ "$solver" = "gt" ]; then
                                if [ ! -f "tests-gt/$input_file" ]; then
                                    echo "File $input_file not found."
                                else
                                    solution=$(./greater-than < "tests-gt/$input_file")
                                    echo "$solution"
                                fi

                            elif [ "$solver" = "hp" ]; then
                                if [ ! -f "tests-hp/$input_file" ]; then
                                    echo "File $input_file not found."
                                else
                                    solution=$(./hyper-sudoku < "tests-hp/$input_file")
                                    echo "$solution"
                                fi

                            elif [ "$solver" = "xs" ]; then
                                if [ ! -f "tests-xs/$input_file" ]; then
                                    echo "File $input_file not found."
                                else
                                    solution=$(./x-sudoku < "tests-xs/$input_file")
                                    echo "$solution"
                                fi

                            else
                                echo "Invalid input. Try again"
                            fi
                        fi
                    done
                fi
            done
        elif [ "$option" = "method" ]; then
            echo -e "\nUsing 10 Different Solving Methods..."
            while true; do
                read -p "
    (Solving Methods) Enter the name of a 3x3 .in file (or 'exit' to change solver/method): 
    >>> " input_name

                if [ "$input_name" = "exit" ]; then
                    echo "
    Exiting the current method...
    "
                    break
                else
                    input_file="$input_name.in"

                    if [ ! -f "tests/$input_file" ]; then
                        echo "File $input_file not found."
                    else
                        solution=$(./method-solver < "tests/$input_file")

                        echo -e "\n- Running $input_file\n"
                        echo "$solution"
                    fi
                fi
            done
        fi
    fi
done